# Location Keyboard v1.2

## –û–±–∑–æ—Ä

–í –≤–µ—Ä—Å–∏–∏ 1.2 –¥–æ–±–∞–≤–ª–µ–Ω–∞ **Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞** –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–∫–∞—Ü–∏–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Å–∫—Ä–µ–ø–∫—É üìé ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É.

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –°—Ç–∞—Ä—Ç–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìç –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–æ–∫–∞—Ü–∏–µ–π      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  ‚îÇ ‚ùå –£–±—Ä–∞—Ç—å ‚îÇ
‚îÇ                ‚îÇ   –∫–Ω–æ–ø–∫–∏  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–Ω–æ–ø–∫–∏

1. **üìç –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–æ–∫–∞—Ü–∏–µ–π** (`request_location=True`)
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –º–µ–Ω—é –≥–µ–æ—à–µ—Ä–∏–Ω–≥–∞ Telegram
   - –í–∞—Ä–∏–∞–Ω—Ç—ã: –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞ / –∂–∏–≤–∞—è –ª–æ–∫–∞—Ü–∏—è
   - –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω—ã—Ö —á–∞—Ç–∞—Ö

2. **‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é —Å–ø—Ä–∞–≤–∫—É –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞
   - –û–±—ä—è—Å–Ω—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –∏ –∂–∏–≤–æ–π –ª–æ–∫–∞—Ü–∏–µ–π

3. **‚ùå –£–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫–∏**
   - –°–∫—Ä—ã–≤–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (`ReplyKeyboardRemove`)
   - –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: `/start`

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### ReplyKeyboardMarkup
```python
keyboard = [
    [KeyboardButton("üìç –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–æ–∫–∞—Ü–∏–µ–π", request_location=True)],
    [KeyboardButton("‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"), KeyboardButton("‚ùå –£–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫–∏")]
]
reply_markup = ReplyKeyboardMarkup(
    keyboard, 
    resize_keyboard=True, 
    one_time_keyboard=False
)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- **`resize_keyboard=True`** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **`one_time_keyboard=False`** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤–∏–¥–∏–º–æ–π
- **`request_location=True`** ‚Äî –∑–∞–ø—Ä–æ—Å –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥

#### –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```python
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
MessageHandler(filters.TEXT & filters.Regex("^‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è$"), info_command)

# –£–±—Ä–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É  
MessageHandler(filters.TEXT & filters.Regex("^‚ùå –£–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫–∏$"), remove_keyboard_command)
```

#### –õ–æ–∫–∞—Ü–∏–∏ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
```python
# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è/–∂–∏–≤–∞—è –ª–æ–∫–∞—Ü–∏—è
MessageHandler(filters.LOCATION, handle_location)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∂–∏–≤–æ–π –ª–æ–∫–∞—Ü–∏–∏
MessageHandler(filters.UpdateType.EDITED_MESSAGE & filters.LOCATION, handle_edited_location)
```

## User Experience Flow

### –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
1. `/start` ‚Üí –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
2. **üìç –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–æ–∫–∞—Ü–∏–µ–π** ‚Üí –º–µ–Ω—é –≥–µ–æ—à–µ—Ä–∏–Ω–≥–∞
3. –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ª–æ–∫–∞—Ü–∏–∏ –≤ Telegram-–∫–ª–∏–µ–Ω—Ç–µ
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –±–æ—Ç–µ

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–∫–∞—Ü–∏—è
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: üìç –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–æ–∫–∞—Ü–∏–µ–π ‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–æ—é —Ç–µ–∫—É—â—É—é –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é
–ë–æ—Ç: üìç –ú–µ—Å—Ç–æ: –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å
     üí° –§–∞–∫—Ç: [–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç]
```

### –ñ–∏–≤–∞—è –ª–æ–∫–∞—Ü–∏—è
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: üìç –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–æ–∫–∞—Ü–∏–µ–π ‚Üí –¢—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å –º–æ—é –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é (30 –º–∏–Ω)
–ë–æ—Ç: üî¥ –ñ–∏–≤–∞—è –ª–æ–∫–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∞!
     [–∫–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤: 5, 10, 30, 60 –º–∏–Ω—É—Ç]
     
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–≤—ã–±–∏—Ä–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª]
–ë–æ—Ç: üî¥ –ñ–∏–≤–∞—è –ª–æ–∫–∞—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!
     üî¥ –ù–∞—á–∞–ª—å–Ω—ã–π —Ñ–∞–∫—Ç + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç—ã –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äî –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Å–∫—Ä–µ–ø–∫—É –∏–ª–∏ –ø–æ–º–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–±—Ä–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤  
- ‚úÖ –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ UX
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –±–∞—Ä—å–µ—Ä–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –°–æ–±–∏—Ä–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram

1. **–¢–æ–ª—å–∫–æ –ª–∏—á–Ω—ã–µ —á–∞—Ç—ã** ‚Äî –≤ –≥—Ä—É–ø–ø–∞—Ö `request_location` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–ù–µ—Ç –ø—Ä–∏–Ω—É–∂–¥–µ–Ω–∏—è –∫ —Ç–∏–ø—É –ª–æ–∫–∞—Ü–∏–∏** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç static/live
3. **–¢–æ–ª—å–∫–æ Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞** ‚Äî Inline-–∫–Ω–æ–ø–∫–∏ –Ω–µ –º–æ–≥—É—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚Äî —Å–∫—Ä–µ–ø–∫–∞ üìé —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ **–°—Ç–∞—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** ‚Äî –º–æ–≥—É—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–≤—ã—á–Ω—ã–π —Å–ø–æ—Å–æ–±
- ‚úÖ **–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** ‚Äî –ø–æ–ª—É—á–∞—é—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–π UX

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ `test_start_command` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ `test_info_command` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  
- ‚úÖ `test_remove_keyboard_command` ‚Äî —Å–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ polling (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
unset WEBHOOK_URL
python -m pytest tests/test_main.py -v
python -m src.main
```

## –°—Ç–∞—Ç—É—Å

- **–í–µ—Ä—Å–∏—è**: v1.2
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —á–µ—Ä–µ–∑ GitHub Actions ‚Üí Railway
- **–¢–µ—Å—Ç—ã**: ‚úÖ –í—Å–µ 11 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç

**NearbyFactBot v1.2 –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º!** üéØ 